# needed for json parsing
sudo apt-get update && sudo apt-get install -y nlohmann-json3-dev
# needed for test http intercept
sudo apt-get install -y libcpp-httplib-dev

# for unity:

# Install MinGW cross toolchain
sudo apt-get update
sudo apt-get install -y mingw-w64 cmake ninja-build

rm -rf build-win
cmake -B build-win -S . -G Ninja \
  -DCMAKE_SYSTEM_NAME=Windows \
  -DCMAKE_C_COMPILER=x86_64-w64-mingw32-gcc \
  -DCMAKE_CXX_COMPILER=x86_64-w64-mingw32-g++ \
  -DCMAKE_RC_COMPILER=x86_64-w64-mingw32-windres \
  -DCMAKE_BUILD_TYPE=Release
cmake --build build-win
# -> build-win/KDNet_plugin.dll  (see CMakeLists tweak below)
